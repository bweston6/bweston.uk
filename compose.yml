networks:
  server:
    external: true
volumes:
    phpsocket:
services:
  nginx:
    container_name: ${ENVIRONMENT}-nginx
    build: ./docker/nginx
    restart: always
    environment:
      - TZ=${TZ}
    volumes:
      - ./nginx:/etc/nginx
      - ./src:/etc/nginx/html/website:ro
      - phpsocket:/var/run
    ports:
      - ${HTTP_PORT}:80
    networks:
      - server
  php:
    container_name: ${ENVIRONMENT}-php
    build: ./docker/php
    volumes:
      - ./src:/var/www/html
      - ./db:/var/data/
      - phpsocket:/var/run
    networks:
      - server
    restart: always
